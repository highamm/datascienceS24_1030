---
title: "Section 10: Import"
author: "Matt Higham"
format: 
  html:
    embed-resources: true
---

## Section 10.1: `read_csv()`

```{r}
library(tidyverse)
library(here)
cars_df <- read_csv(here("data/mtcarsex.csv"))
head(cars_df)

## fix the first two lines
cars_df <- read_csv(here("data/mtcarsex.csv"),
                    skip = 2,
                    na = c("NA", "", " ", "-999"))

read_csv(here("data/mtcarsex.csv"), na = c("NA", "-999"), skip = 2) |>
  spec()

cars_df <- read_csv(here("data/mtcarsex.csv"),
                    skip = 2,
                    na = c("NA", "", " ", "-999"),
                    col_types = cols(
                      mpg = col_double(),
                      cyl = col_factor(),
                      disp = col_double(),
                      hp = col_double(),
                      drat = col_double(),
                      wt = col_double(),
                      qsec = col_double(),
                      vs = col_factor(),
                      am = col_factor(),
                      gear = col_double(),
                      carb = col_double()
                    )) |>
  slice(-c(1:2))
cars_df
```

Exercise 1.

```{r}
fitness_df <- read_csv(here::here("data/higham_fitness_notclean.csv"),
                       col_types =  cols(
                         Date = col_date(format = ""),
                         active_cals = col_double(),
                         flights = col_double(),
                         steps = col_double(),
                         distance = col_double(),
                         month = col_character(),
                         weekday = col_character(),
                         dayofyear = col_double(),
                         year = col_double(),
                         stepgoal = col_logical()
                       ))

```

## Section 10.2: Data Scraping

```{r}
library(tidyverse)
library(rvest)

## provide the URL and name it something (in this case, url).
url <- "https://en.wikipedia.org/wiki/Gun_violence_in_the_United_States_by_state"

## read_html() convert the html code from the URL into something R can read
tab <- read_html(url) |> 
  html_nodes("table") ## html_nodes can grab only the tables 
```

```{r}
test1 <- tab[[1]] |> html_table()
test1
test2 <- tab[[2]] |> html_table()
test2
test3 <- tab[[3]] |> html_table()
test3
```

Exercise 2.

```{r}
url_diversity <- "https://www.stlawu.edu/offices/institutional-research/student-diversity-2021"
tab <- read_html(url_diversity) |> 
  html_nodes("table")
tab[[1]] |> html_table()
```

Section 10.3

Skip
